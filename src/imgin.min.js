!function(n,t){"function"==typeof define&&define.amd?define(["jquery"],function(e){return n.imgin=t(e)}):n.imgin=t(n.jQuery)}(this,function(n){return function(t){var e={offset:0,lag:200,attr:"data-imginsrc",onload:null},i=n(window),o=null,r=null,c={init:function(t){return n.extend(e,t),c.find(),c.check(),f},find:function(){o=n("img["+e.attr+"]").attr("data-imginloaded","false"),o.length&&c.bind()},bind:function(){i.on("resize scroll",c.check)},unbind:function(){i.off("resize scroll",c.check)},check:function(){return o.length?(clearInterval(r),void(r=setTimeout(c.load,e.lag))):(c.unbind(),!1)},inviewport:function(n){var t=n.getBoundingClientRect(),i=t.bottom<e.offset*-1,o=t.top>document.documentElement.clientHeight+e.offset;return!i&&!o},load:function(t){if(t)var i=o;else var i=o.filter(function(){return c.inviewport(n(this).get(0))});i.each(function(){var t=n(this),i=t.attr(e.attr),r=new Image;r.src=i,r.onload=function(){t.removeAttr(e.attr).attr("data-imginloaded","true").attr("src",i),o=o.not(t),"function"==typeof e.onload&&e.onload(t),r=null}})}},f={force:function(){c.load(!0)},refresh:function(){c.find(),c.check()}};return c.init(t)}});