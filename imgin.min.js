imgin=function(c){var a={offset:0,lag:300,transition:800,attr:"data-imginsrc",onload:null};var g=$(window);var e=null;var d=null;var f={init:function(h){$.extend(a,h);f.find();f.check();return b},find:function(){e=$("img["+a.attr+"]");if(e.length){f.bind()}},bind:function(){g.on("resize scroll",f.check)},unbind:function(){g.off("resize scroll",f.check)},check:function(){if(!e.length){f.unbind();return false}clearInterval(d);d=setTimeout(f.load,a.lag)},inviewport:function(k){var i=k.getBoundingClientRect();var h=(i.bottom<a.offset*(-1));var j=(i.top>(document.documentElement.clientHeight+a.offset));return(h||j)?false:true},load:function(h){if(h){var i=e}else{var i=e.filter(function(){return f.inviewport($(this).get(0))})}i.each(function(){var j=$(this);var k=j.attr(a.attr);j.attr("src",k).css({opacity:0}).removeAttr(a.attr);e=e.not(j);j.on("load",function(){$(this).animate({opacity:1},a.transition,function(){if(typeof a.onload==="function"){a.onload($(this))}})})})}};var b={force:function(){f.load(true)},refresh:function(){f.find();console.log(e);f.check()}};return f.init(c)};