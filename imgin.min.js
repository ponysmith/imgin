(function(a,b){if(typeof define==="function"&&define.amd){define(["jquery"],function(c){return(a.imgin=b(c))})}else{a.imgin=b(a.jQuery)}}(this,function(a){return function(d){var b={offset:0,lag:200,attr:"data-imginsrc",onload:null};var h=a(window);var f=null;var e=null;var g={init:function(i){a.extend(b,i);g.find();g.check();return c},find:function(){f=a("img["+b.attr+"]").attr("data-imginloaded","false");if(f.length){g.bind()}},bind:function(){h.on("resize scroll",g.check)},unbind:function(){h.off("resize scroll",g.check)},check:function(){if(!f.length){g.unbind();return false}clearInterval(e);e=setTimeout(g.load,b.lag)},inviewport:function(l){var j=l.getBoundingClientRect();var i=(j.bottom<b.offset*(-1));var k=(j.top>(document.documentElement.clientHeight+b.offset));return(i||k)?false:true},load:function(i){if(i){var j=f}else{var j=f.filter(function(){return g.inviewport(a(this).get(0))})}j.each(function(){var k=a(this);var m=k.attr(b.attr);var l=new Image();l.src=m;l.onload=function(){k.removeAttr(b.attr).attr("data-imginloaded","true").attr("src",m);f=f.not(k);if(typeof b.onload==="function"){b.onload(k)}l=null}})}};var c={force:function(){g.load(true)},refresh:function(){g.find();g.check()}};return g.init(d)}}));