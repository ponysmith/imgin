!function(a,b){"function"==typeof define&&define.amd?define(["jquery"],function(c){return a.imgin=b(c)}):a.imgin=b(a.jQuery)}(this,function(a){return function(b){var c={offset:0,lag:200,attr:"data-imginsrc",onload:null},d=a(window),e=null,f=null,g={init:function(b){return a.extend(c,b),g.find(),g.check(),h},find:function(){e=a("img["+c.attr+"]").attr("data-imginloaded","false"),e.length&&g.bind()},bind:function(){d.on("resize scroll",g.check)},unbind:function(){d.off("resize scroll",g.check)},check:function(){return e.length?(clearInterval(f),void(f=setTimeout(g.load,c.lag))):(g.unbind(),!1)},inviewport:function(a){var b=a.getBoundingClientRect(),d=b.bottom<-1*c.offset,e=b.top>document.documentElement.clientHeight+c.offset;return d||e?!1:!0},load:function(b){if(b)var d=e;else var d=e.filter(function(){return g.inviewport(a(this).get(0))});d.each(function(){var b=a(this),d=b.attr(c.attr),f=new Image;f.src=d,f.onload=function(){b.removeAttr(c.attr).attr("data-imginloaded","true").attr("src",d),e=e.not(b),"function"==typeof c.onload&&c.onload(b),f=null}})}},h={force:function(){g.load(!0)},refresh:function(){g.find(),g.check()}};return g.init(b)}});